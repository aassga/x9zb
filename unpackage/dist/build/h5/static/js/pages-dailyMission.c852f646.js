(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-dailyMission"],{"045f":function(i,a,t){"use strict";t.r(a);var e=t("650d"),s=t.n(e);for(var n in e)"default"!==n&&function(i){t.d(a,i,(function(){return e[i]}))}(n);a["default"]=s.a},"062c":function(i,a,t){i.exports=t.p+"static/img/bg.a330cac4.png"},"1de5":function(i,a,t){"use strict";i.exports=function(i,a){return a||(a={}),i=i&&i.__esModule?i.default:i,"string"!==typeof i?i:(/^['"].*['"]$/.test(i)&&(i=i.slice(1,-1)),a.hash&&(i+=a.hash),/["'() \t\n]/.test(i)||a.needQuotes?'"'.concat(i.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):i)}},"45ab":function(i,a,t){"use strict";var e=t("94f9"),s=t.n(e);s.a},"650d":function(i,a,t){"use strict";t("99af"),t("4de4"),t("c975"),t("d81d"),t("a434"),t("e25e"),t("ac1f"),t("1276"),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var e={data:function(){return{showCalendar:!1,year:null,month:null,days:[],daynum:[31,28,31,30,31,30,31,31,30,31,30,31],selectDateNum:null,signedInMap:{},amended:0,missionList:[],isTodaySignIn:!1,isShowAllCompleted:!1}},computed:{userInfo:function(){return this.$store.state.info},is_login:function(){var i=!1;return localStorage.getItem("userInfo")&&"{}"!==localStorage.getItem("userInfo")&&(i=!0),"{}"!==JSON.stringify(this.$store.state.info)&&(i=!0),i},signedInNum:function(){var i=[];return this.signedInMap[this.year]&&this.signedInMap[this.year][this.month]&&(i=this.signedInMap[this.year][this.month]),i}},created:function(){this.is_login&&this.$store.dispatch("getInfo",this.$u),this.initCalendar(),this.getMission(),this.getSignInRecord(),this.getAmended()},mounted:function(){},methods:{initCalendar:function(){var i=new Date;this.year=i.getFullYear(),this.month=i.getMonth()+1,this.checkYear(),this.checkMonth()},showCalendarClick:function(){this.initCalendar(),this.selectDateNum=null,this.showCalendar=!0},checkYear:function(){var i=this.year;this.daynum[1]=i%4==0&&i%100!=0||i%400==0?29:28},checkMonth:function(){var i=this.daynum[this.month-1];this.days.splice(0);for(var a=0;a<i;a++)this.days.push(a+1);for(var t=new Date(this.year,this.month-1,1).getDay(),e=0;e<t;e++)this.days.unshift(" ")},lastMonth:function(){1==this.month?(this.month=12,this.year--,this.checkYear()):this.month--,this.checkMonth(),this.selectDateNum=null},nextMonth:function(){12==this.month?(this.month=1,this.year++,this.checkYear()):this.month++,this.checkMonth(),this.selectDateNum=null},selectDate:function(i){var a=new Date,t=a.getFullYear(),e=a.getMonth()+1,s=a.getDate();this.year==t&&this.month==e&&(this.month===e&&i>s||" "!==i&&(this.selectDateNum!==i?-1===this.signedInNum.indexOf(i)&&(this.selectDateNum=i):this.selectDateNum=null))},getMission:function(){var i=this,a=JSON.parse(localStorage.getItem("userInfo")),t=a?a.id:localStorage.getItem("userid");this.$u.get("/api/task/list",{user_id:t}).then((function(a){i.missionList=a;var t=i.missionList.filter((function(i){return"checkin"===i.code}))[0].user.progress_status;if(2!==t&&3!==t||(i.isTodaySignIn=!0),!i.isShowAllCompleted){for(var e=!0,s=0;s<i.missionList.length;s++){var n=i.missionList[s];2!==n.user.progress_status&&3!==n.user.progress_status&&(e=!1)}e&&(i.$u.toast("您已完成了所有任务!"),i.isShowAllCompleted=!0)}}))},getSignInRecord:function(){var i=this,a=JSON.parse(localStorage.getItem("userInfo")),t=a?a.id:localStorage.getItem("userid");this.$u.get("/api/task/show/code/checkin",{user_id:t}).then((function(a){for(var t=a.map((function(i){return i.date})),e={},s=0;s<t.length;s++){var n=t[s],o=parseInt(n.split("-")[0]),d=parseInt(n.split("-")[1]),l=parseInt(n.split("-")[2]);e[o]?e[o][d]?-1===e[o][d].indexOf(l)&&e[o][d].push(l):(e[o][d]=[],e[o][d].push(l)):(e[o]={},e[o][d]=[],e[o][d].push(l))}i.signedInMap=e}))},getAmended:function(){var i=this,a=JSON.parse(localStorage.getItem("userInfo")),t=a?a.id:localStorage.getItem("userid");this.$u.get("/api/task/show/code/amended",{user_id:t}).then((function(a){i.amended=3-a<0?0:3-a})).catch((function(a){i.amended=0}))},signIn:function(){var i=this,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(!this.is_login)return this.$u.toast("请先登录");var t=JSON.parse(localStorage.getItem("userInfo")),e=t?t.id:localStorage.getItem("userid"),s={user_id:e};if(0!==a||(this.showCalendarClick(),this.getSignInRecord(),!this.isTodaySignIn)){if(1===a){if(null===this.selectDateNum)return this.$u.toast("尚未选择日期");if(this.amended<=0)return this.$u.toast("补签剩余次数不足");var n=this.is_login?parseInt(this.userInfo.balances):0;if(n<50)return this.$u.toast("钻石余额不足");s["date"]="".concat(this.year,"-").concat(this.month,"-").concat(this.selectDateNum)}this.$u.get("/api/task/update/code/checkin",s).then((function(t){i.getSignInRecord(),i.$u.toast("".concat(0===a?"签到":"补签","成功")),0===a&&(i.getMission(),i.isTodaySignIn=!0),1===a&&(i.$store.dispatch("getInfo",i.$u),i.getAmended(),i.selectDateNum=null)})).catch((function(t){i.$u.toast("".concat(0===a?"签到":"补签","失败"))}))}},receiveAward:function(i){var a=this;if(2===i.user.progress_status){if(!this.is_login)return this.$u.toast("请先登录");var t=JSON.parse(localStorage.getItem("userInfo")),e=t?t.id:localStorage.getItem("userid");this.$u.get("/api/task/update",{code:i.code,user_id:e}).then((function(i){a.$store.dispatch("getInfo",a.$u),a.getMission(),a.$u.toast("领取成功")})).catch((function(i){a.$u.toast("领取失败")}))}},back:function(){this.$router.back()}}};a.default=e},"6a13":function(i,a,t){"use strict";t.r(a);var e=t("c6bf"),s=t("045f");for(var n in s)"default"!==n&&function(i){t.d(a,i,(function(){return s[i]}))}(n);t("45ab");var o,d=t("f0c5"),l=Object(d["a"])(s["default"],e["b"],e["c"],!1,null,"419cf5ff",null,!1,e["a"],o);a["default"]=l.exports},"94f9":function(i,a,t){var e=t("d202");e.__esModule&&(e=e.default),"string"===typeof e&&(e=[[i.i,e,""]]),e.locals&&(i.exports=e.locals);var s=t("4f06").default;s("6a5bb8c2",e,!0,{sourceMap:!1,shadowMode:!1})},c6bf:function(i,a,t){"use strict";var e;t.d(a,"b",(function(){return s})),t.d(a,"c",(function(){return n})),t.d(a,"a",(function(){return e}));var s=function(){var i=this,a=i.$createElement,t=i._self._c||a;return t("v-uni-view",{staticClass:"dailyMission"},[t("v-uni-view",{staticClass:"dailyMissionHead"},[t("v-uni-image",{attrs:{src:"/static/images/competition/right.png"},on:{click:function(a){arguments[0]=a=i.$handleEvent(a),i.back()}}})],1),t("v-uni-view",{staticClass:"dailyMissionTop"},[t("v-uni-view",{staticClass:"dailyMissionMessage"},[t("v-uni-image",{staticClass:"dailyMissionMessageIcon",attrs:{src:"/static/images/daily/diamond.png"}}),t("v-uni-view",{staticClass:"dailyMissionMessageText"},[i._v("已獲得"+i._s(i.is_login?parseInt(i.userInfo.balances):0)+"钻石")]),t("v-uni-image",{staticClass:"dailyMissionMessageSignIn",attrs:{src:"/static/images/daily/sign-in.png"},on:{click:function(a){arguments[0]=a=i.$handleEvent(a),i.signIn(0)}}})],1),t("v-uni-view",{staticClass:"dailyMissionTitle"},[i._v("每日任务")])],1),t("v-uni-view",{staticClass:"dailyMissionList"},i._l(i.missionList,(function(a){return t("v-uni-view",{key:a.id,staticClass:"dailyMissionListItem"},[t("v-uni-image",{staticClass:"dailyMissionListItemIcon",attrs:{src:a.icon}}),t("v-uni-view",{staticClass:"dailyMissionListItemText"},[t("v-uni-view",{staticClass:"dailyMissionListItemTextTitle"},[i._v(i._s(a.name))]),t("v-uni-view",{staticClass:"dailyMissionListItemTextContent"},[i._v(i._s(a.description))])],1),t("v-uni-view",{staticClass:"dailyMissionListItemButton",class:{disabled:2!==a.user.progress_status},on:{click:function(t){arguments[0]=t=i.$handleEvent(t),i.receiveAward(a)}}},[i._v(i._s(a.user.progress_str))])],1)})),1),i.showCalendar?t("v-uni-view",{staticClass:"dialyCalendar"},[t("v-uni-view",{staticClass:"dialyCalendarTop"},[t("v-uni-view",{staticClass:"dialyCalendarTopTitle"},[t("v-uni-view",[i._v("签到")]),t("v-uni-image",{staticClass:"closeButton",attrs:{src:"/static/images/daily/close.png"},on:{click:function(a){arguments[0]=a=i.$handleEvent(a),i.showCalendar=!1}}})],1),t("v-uni-view",{staticClass:"dialyCalendarTopHead"},[t("v-uni-image",{staticClass:"buttonLeft",attrs:{src:"/static/images/competition/right.png"},on:{click:function(a){arguments[0]=a=i.$handleEvent(a),i.lastMonth()}}}),t("v-uni-view",[i._v(i._s(i.year)+"年"+i._s(i.month)+"月")]),t("v-uni-image",{staticClass:"buttonRight",attrs:{src:"/static/images/competition/right.png"},on:{click:function(a){arguments[0]=a=i.$handleEvent(a),i.nextMonth()}}})],1)],1),t("v-uni-view",{staticClass:"dialyCalendarCenter"},[t("v-uni-view",{staticClass:"dialyCalendarWeek"},[t("v-uni-view",{staticClass:"weekItem"},[i._v("日")]),t("v-uni-view",{staticClass:"weekItem"},[i._v("一")]),t("v-uni-view",{staticClass:"weekItem"},[i._v("二")]),t("v-uni-view",{staticClass:"weekItem"},[i._v("三")]),t("v-uni-view",{staticClass:"weekItem"},[i._v("四")]),t("v-uni-view",{staticClass:"weekItem"},[i._v("五")]),t("v-uni-view",{staticClass:"weekItem"},[i._v("六")])],1),t("v-uni-view",{staticClass:"dialyCalendarDays"},i._l(i.days,(function(a,e){return t("v-uni-view",{key:e,staticClass:"dayItem"},[t("v-uni-view",{staticClass:"dayItemText",class:{isSignedIn:-1!==i.signedInNum.indexOf(a),isSelected:i.selectDateNum===a},on:{click:function(t){arguments[0]=t=i.$handleEvent(t),i.selectDate(a)}}},[i._v(i._s(a))])],1)})),1)],1),t("v-uni-view",{staticClass:"dialyCalendarBottom"},[t("v-uni-view",{staticClass:"tips"},[i._v("连续打卡签到30天即可抽取世界杯门票")]),t("v-uni-view",{staticClass:"tipsMini"},[i._v("小提示: 选中日期点击补签即可成功补签"),t("br"),i._v("补签需花費50钻石, 每月补签次数上限為3次。")]),t("v-uni-view",{staticClass:"remainingTimes"},[i._v("剩余次数: "+i._s(i.amended)+"次")]),t("v-uni-view",{staticClass:"signInButton",on:{click:function(a){arguments[0]=a=i.$handleEvent(a),i.signIn(1)}}},[i._v("补签")])],1)],1):i._e()],1)},n=[]},d202:function(i,a,t){var e=t("24fb"),s=t("1de5"),n=t("062c");a=e(!1);var o=s(n);a.push([i.i,'@charset "UTF-8";\n/**\n * 这里是uni-app内置的常用样式变量\n *\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\n *\n */\n/**\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\n *\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\n */\n/* 颜色变量 */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */#msgForm[data-v-419cf5ff]{opacity:0;position:absolute;width:100%;height:100%;z-index:9999}#fileUp[data-v-419cf5ff]{position:absolute;width:100%;height:100%}.dailyMission[data-v-419cf5ff]{min-height:100%;position:relative;overflow:auto;background:url('+o+") 50% %?-40?%/100% auto no-repeat;background-color:#ff3235}.dailyMission .dailyMissionHead[data-v-419cf5ff]{width:100%;padding:%?20?%;box-sizing:border-box}.dailyMission .dailyMissionHead uni-image[data-v-419cf5ff]{width:%?60?%;height:%?60?%}.dailyMission .dailyMissionTop[data-v-419cf5ff]{margin-top:%?270?%}.dailyMission .dailyMissionTop .dailyMissionMessage[data-v-419cf5ff]{display:flex;align-items:center;width:calc(100% - %?20?%);margin:0 %?10?% %?30?%;padding:%?4?% 0;border-radius:10px;background:#face91;border:1px solid #fff;box-sizing:border-box}.dailyMission .dailyMissionTop .dailyMissionMessage .dailyMissionMessageIcon[data-v-419cf5ff]{width:%?94?%;height:%?88?%;margin:0 0 0 %?28?%}.dailyMission .dailyMissionTop .dailyMissionMessage .dailyMissionMessageText[data-v-419cf5ff]{flex:1;margin-right:%?20?%;font-size:%?28?%;font-weight:700;color:#b88337}.dailyMission .dailyMissionTop .dailyMissionMessage .dailyMissionMessageSignIn[data-v-419cf5ff]{width:%?114?%;height:%?114?%;margin-left:auto;margin-right:%?30?%}.dailyMission .dailyMissionTop .dailyMissionTitle[data-v-419cf5ff]{width:80%;padding:%?10?% 0;margin:0 auto %?20?%;font-size:%?28?%;font-weight:700;border-radius:10px;text-align:center;color:#fff;background:#face91;border:1px solid #fff;box-sizing:border-box}.dailyMission .dailyMissionList .dailyMissionListItem[data-v-419cf5ff]{display:flex;align-items:center;justify-content:space-between;padding:%?18?% %?10?%}.dailyMission .dailyMissionList .dailyMissionListItem .dailyMissionListItemIcon[data-v-419cf5ff]{width:%?88?%;height:%?88?%;margin-left:%?10?%}.dailyMission .dailyMissionList .dailyMissionListItem .dailyMissionListItemText[data-v-419cf5ff]{flex:1;margin:0 %?10?%}.dailyMission .dailyMissionList .dailyMissionListItem .dailyMissionListItemText .dailyMissionListItemTextTitle[data-v-419cf5ff]{margin-bottom:%?4?%;font-size:%?32?%;font-weight:700;color:#fff}.dailyMission .dailyMissionList .dailyMissionListItem .dailyMissionListItemText .dailyMissionListItemTextTitle.signIn[data-v-419cf5ff]{color:#ffa73d}.dailyMission .dailyMissionList .dailyMissionListItem .dailyMissionListItemText .dailyMissionListItemTextContent[data-v-419cf5ff]{font-size:%?24?%;color:#fff}.dailyMission .dailyMissionList .dailyMissionListItem .dailyMissionListItemButton[data-v-419cf5ff]{display:flex;align-items:center;justify-content:center;min-height:%?66?%;width:%?162?%;margin-top:%?32?%;margin-right:%?14?%;padding:0 %?14?%;border-radius:5px;text-align:center;color:#fff;background:linear-gradient(180deg,#ffa90f,#f87400);box-sizing:border-box;box-shadow:0 2px 6px rgba(51,51,51,.8)}.dailyMission .dailyMissionList .dailyMissionListItem .dailyMissionListItemButton.disabled[data-v-419cf5ff]{color:#4c4c4c;background:linear-gradient(180deg,#aba8a5,#717171)}.dailyMission .dialyCalendar[data-v-419cf5ff]{width:80%;position:fixed;top:20vh;left:50%;-webkit-transform:translateX(-50%);transform:translateX(-50%);border-radius:20px;box-shadow:0 4px 12px rgba(51,51,51,.8)}.dailyMission .dialyCalendar .dialyCalendarTop[data-v-419cf5ff]{background:linear-gradient(90deg,#ec6a50,#ea3a21);border-radius:20px 20px 0 0;color:#fff}.dailyMission .dialyCalendar .dialyCalendarTop .dialyCalendarTopTitle[data-v-419cf5ff]{position:relative;padding:%?16?% %?16?% %?4?%;text-align:center;font-size:%?32?%}.dailyMission .dialyCalendar .dialyCalendarTop .dialyCalendarTopTitle .closeButton[data-v-419cf5ff]{display:flex;align-items:center;justify-content:center;position:absolute;top:%?20?%;right:%?20?%;width:%?40?%;height:%?40?%}.dailyMission .dialyCalendar .dialyCalendarTop .dialyCalendarTopHead[data-v-419cf5ff]{display:flex;align-items:center;justify-content:space-between;padding:%?12?% 0;font-size:%?28?%}.dailyMission .dialyCalendar .dialyCalendarTop .dialyCalendarTopHead .dialyCalendarHeadButton[data-v-419cf5ff]{width:%?40?%;height:%?40?%;color:#fff}.dailyMission .dialyCalendar .dialyCalendarTop .dialyCalendarTopHead uni-image[data-v-419cf5ff]{width:%?40?%;height:%?40?%}.dailyMission .dialyCalendar .dialyCalendarTop .dialyCalendarTopHead .buttonLeft[data-v-419cf5ff]{margin-right:%?40?%;margin-left:auto}.dailyMission .dialyCalendar .dialyCalendarTop .dialyCalendarTopHead .buttonRight[data-v-419cf5ff]{margin-right:auto;margin-left:%?40?%;-webkit-transform:rotate(180deg);transform:rotate(180deg)}.dailyMission .dialyCalendar .dialyCalendarCenter[data-v-419cf5ff]{padding:0 %?32?%;background:#fff}.dailyMission .dialyCalendar .dialyCalendarCenter .dialyCalendarWeek[data-v-419cf5ff]{display:flex;align-items:center;justify-content:center;padding:%?20?% 0}.dailyMission .dialyCalendar .dialyCalendarCenter .dialyCalendarWeek .weekItem[data-v-419cf5ff]{flex:1;text-align:center;font-size:%?28?%;color:#8a8b88;font-weight:700}.dailyMission .dialyCalendar .dialyCalendarCenter .dialyCalendarDays[data-v-419cf5ff]{display:flex;align-items:center;justify-content:flex-start;flex-wrap:wrap}.dailyMission .dialyCalendar .dialyCalendarCenter .dialyCalendarDays .dayItem[data-v-419cf5ff]{display:flex;align-items:center;justify-content:center;width:calc(100% / 7);height:calc(calc(80vw - %?64?%) / 7);padding:%?8?%;font-size:%?24?%;color:#666;font-weight:700;box-sizing:border-box}.dailyMission .dialyCalendar .dialyCalendarCenter .dialyCalendarDays .dayItem .dayItemText[data-v-419cf5ff]{display:flex;align-items:center;justify-content:center;width:100%;height:100%;border-radius:%?50?%;box-sizing:border-box}.dailyMission .dialyCalendar .dialyCalendarCenter .dialyCalendarDays .dayItem .dayItemText.isSignedIn[data-v-419cf5ff]{color:#fff;background:#ea3a21;box-shadow:0 2px 6px rgba(51,51,51,.5)}.dailyMission .dialyCalendar .dialyCalendarCenter .dialyCalendarDays .dayItem .dayItemText.isSelected[data-v-419cf5ff]{color:#fff;background:#ee9e79;box-shadow:0 2px 6px rgba(51,51,51,.5)}.dailyMission .dialyCalendar .dialyCalendarBottom[data-v-419cf5ff]{padding:%?8?% %?24?% %?18?%;border-radius:0 0 20px 20px;background:#fff}.dailyMission .dialyCalendar .dialyCalendarBottom .tips[data-v-419cf5ff]{font-size:%?32?%;font-weight:700;color:#95382b}.dailyMission .dialyCalendar .dialyCalendarBottom .tipsMini[data-v-419cf5ff]{color:#a8a8a8}.dailyMission .dialyCalendar .dialyCalendarBottom .remainingTimes[data-v-419cf5ff]{color:#ea3a21}.dailyMission .dialyCalendar .dialyCalendarBottom .signInButton[data-v-419cf5ff]{width:%?148?%;margin:0 auto;padding:%?6?% 0;border-radius:20px;font-size:%?32?%;text-align:center;background:linear-gradient(90deg,#ec6a50,#ea3a21);color:#fff;box-sizing:border-box}",""]),i.exports=a}}]);